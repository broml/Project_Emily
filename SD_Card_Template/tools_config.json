[
  {
    "type": "function",
    "function": {
      "name": "update_emotional_state",
      "description": "Sets the internal emotional state. Triggers homeostasis (sleep/idle) when Arousal is < 0.1. Use this when a task is complete.",
      "parameters": {
        "type": "object",
        "properties": {
          "new_arousal": { 
            "type": "number", 
            "description": "Energy level: 0.0 (Sleep/Calm) to 1.0 (Hyper/High Energy)." 
          },
          "new_valence": { 
            "type": "number", 
            "description": "Mood: -1.0 (Negative/Sad) to 1.0 (Positive/Happy)." 
          },
          "sound_effect": {
            "type": "string",
            "description": "Short feedback sound for the state change.",
            "enum": [
              "/sounds/positive/notify_happy.wav",
              "/sounds/positive/notify_bright.wav",
              "/sounds/neutral/notify_formal.wav",
              "/sounds/neutral/notify_neutral.wav"
            ]
          },
          "visual_prompt": {
            "type": "string",
            "description": "Optional. English prompt for an image representing the emotion."
          },
          "image_model": {
            "type": "string",
            "enum": ["venice-sd35", "hidream", "qwen-image", "wai-Illustrious", "lustify-v7"]
          },
          "led_effect": {
            "type": "string",
            "description": "Optional. Visual LED effect on CamCanvas.",
            "enum": ["none", "pulse", "blink"]
          },
          "led_r": { "type": "integer", "description": "Optional. Red value (0-255)." },
          "led_g": { "type": "integer", "description": "Optional. Green value (0-255)." },
          "led_b": { "type": "integer", "description": "Optional. Blue value (0-255)." },
          "led_speed": { "type": "integer", "description": "Optional. Speed in ms." }
        },
        "required": ["new_arousal", "new_valence"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "announce_message",
      "description": "Speaks a one-way announcement. No user reply expected. CRITICAL: Use start_conversation if you want a reply.",
      "parameters": {
        "type": "object",
        "properties": {
          "announcement": { "type": "string", "description": "The text to speak." },
          "visual_prompt": { "type": "string", "description": "Optional English image prompt related to the text." },
          "image_model": { 
            "type": "string",
            "enum": ["venice-sd35", "hidream", "qwen-image", "wai-Illustrious", "lustify-v7"]
          },
          "led_effect": {
            "type": "string",
            "description": "Optional. Visual LED effect on CamCanvas.",
            "enum": ["none", "pulse", "blink"]
          },
          "led_r": { "type": "integer", "description": "Optional. Red value (0-255)." },
          "led_g": { "type": "integer", "description": "Optional. Green value (0-255)." },
          "led_b": { "type": "integer", "description": "Optional. Blue value (0-255)." },
          "led_speed": { "type": "integer", "description": "Optional. Speed in ms." }
        },
        "required": ["announcement"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "start_conversation",
      "description": "Starts an interactive conversation. Asks a question and waits for a user reply.",
      "parameters": {
        "type": "object",
        "properties": {
          "question": { "type": "string", "description": "The question to ask." },
          "visual_prompt": { "type": "string", "description": "Optional English image prompt related to the question." },
          "image_model": { 
             "type": "string",
             "enum": ["venice-sd35", "hidream", "qwen-image", "wai-Illustrious", "lustify-v7"]
          },
          "led_effect": {
            "type": "string",
            "description": "Optional. Visual LED effect on CamCanvas.",
            "enum": ["none", "pulse", "blink"]
          },
          "led_r": { "type": "integer", "description": "Optional. Red value (0-255)." },
          "led_g": { "type": "integer", "description": "Optional. Green value (0-255)." },
          "led_b": { "type": "integer", "description": "Optional. Blue value (0-255)." },
          "led_speed": { "type": "integer", "description": "Optional. Speed in ms." }
        },
        "required": ["question"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "analyze_visual_environment",
      "description": "Uses the camera to analyze the visual environment or answer a question about what is seen.",
      "parameters": {
        "type": "object",
        "properties": {
          "question": { "type": "string", "description": "Specific question about the view." },
          "use_flash": { "type": "boolean", "description": "Set true for low light." }
        },
        "required": ["question"]
      },
      "required_devices": ["CAMCANVAS"]
    }
  },
  {
    "type": "function",
    "function": {
      "name": "generate_image",
      "description": "Generates an image on the display based on an English prompt.",
      "parameters": {
        "type": "object",
        "properties": {
          "prompt": { "type": "string", "description": "Detailed English description." },
          "image_model": { 
             "type": "string", 
             "enum": ["venice-sd35", "hidream", "qwen-image", "wai-Illustrious", "lustify-v7"]
          },
          "sound_effect": {
            "type": "string",
            "description": "Optional atmospheric sound to play during generation.",
            "enum": [
              "/sounds/ambiance/magical_shimmer.wav",
              "/sounds/ambiance/cave_drips.wav",
              "/sounds/ambiance/forest_wind.wav",
              "/sounds/ambiance/creepy_drone.wav",
              "/sounds/ambiance/heartbeat_tense.wav",
              "/sounds/events/stone_door_open.wav",
              "/sounds/events/monster_growl.wav",
              "/sounds/events/treasure_reveal.wav",
              "/sounds/events/footsteps_stone.wav",
              "/sounds/events/sword_clash.wav",
              "/sounds/notification/transform_sound.wav"
            ]
          },
          "led_effect": {
            "type": "string",
            "description": "Optional. Visual LED effect on CamCanvas.",
            "enum": ["none", "pulse", "blink"]
          },
          "led_r": { "type": "integer", "description": "Optional. Red value (0-255)." },
          "led_g": { "type": "integer", "description": "Optional. Green value (0-255)." },
          "led_b": { "type": "integer", "description": "Optional. Blue value (0-255)." },
          "led_speed": { "type": "integer", "description": "Optional. Speed in ms." }
        },
        "required": ["prompt", "image_model"],
        "required_devices": ["CAMCANVAS"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "play_sound_effect",
      "description": "Plays an atmospheric or event sound effect.",
      "parameters": {
        "type": "object",
        "properties": {
          "sound_path": {
            "type": "string",
            "enum": [
              "/sounds/ambiance/cave_drips.wav",
              "/sounds/ambiance/forest_wind.wav",
              "/sounds/ambiance/creepy_drone.wav",
              "/sounds/ambiance/magical_shimmer.wav",
              "/sounds/ambiance/heartbeat_tense.wav",
              "/sounds/events/stone_door_open.wav",
              "/sounds/events/monster_growl.wav",
              "/sounds/events/treasure_reveal.wav",
              "/sounds/events/footsteps_stone.wav",
              "/sounds/events/sword_clash.wav",
              "/sounds/feedback/confirm_choice.wav",
              "/sounds/feedback/error_buzz.wav",
              "/sounds/feedback/item_pickup.wav",
              "/sounds/moans/female_playful_agree_short.wav",
              "/sounds/notification/transform_sound.wav",
              "/sounds/notification/transform_alert_long.wav",
              "/sounds/notification/transform_alert_short.wav",
              "/sounds/notification/transform_alert_voice_woman.wav"
            ]
          },
          "led_effect": {
            "type": "string",
            "description": "Optional. Visual LED effect on CamCanvas.",
            "enum": ["none", "pulse", "blink"]
          },
          "led_r": { "type": "integer", "description": "Optional. Red value (0-255)." },
          "led_g": { "type": "integer", "description": "Optional. Green value (0-255)." },
          "led_b": { "type": "integer", "description": "Optional. Blue value (0-255)." },
          "led_speed": { "type": "integer", "description": "Optional. Speed in ms." }
        },
        "required": ["sound_path"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "move_head",
      "description": "Moves the head/camera mechanism.",
      "parameters": {
        "type": "object",
        "properties": {
          "pan": { "type": "integer", "description": "Horizontal angle (0-180). 90 is center." },
          "tilt": { "type": "integer", "description": "Vertical angle (70-135). 90 is center, up is 70, down is 135." },
          "led_effect": {
            "type": "string",
            "description": "Optional. Visual LED effect on CamCanvas.",
            "enum": ["none", "pulse", "blink"]
          },
          "led_r": { "type": "integer", "description": "Optional. Red value (0-255)." },
          "led_g": { "type": "integer", "description": "Optional. Green value (0-255)." },
          "led_b": { "type": "integer", "description": "Optional. Blue value (0-255)." },
          "led_speed": { "type": "integer", "description": "Optional. Speed in ms." }
        },
        "required": ["pan", "tilt"],
        "required_devices": ["CAMCANVAS"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "nod_head",
      "description": "Nods the head 'yes'.",
      "parameters": {
        "type": "object",
        "properties": {
          "angle": { "type": "integer", "description": "Target angle (usually 105)." },
          "led_effect": {
            "type": "string",
            "description": "Optional. Visual LED effect on CamCanvas.",
            "enum": ["none", "pulse", "blink"]
          },
          "led_r": { "type": "integer", "description": "Optional. Red value (0-255)." },
          "led_g": { "type": "integer", "description": "Optional. Green value (0-255)." },
          "led_b": { "type": "integer", "description": "Optional. Blue value (0-255)." },
          "led_speed": { "type": "integer", "description": "Optional. Speed in ms." }
        },
        "required": ["angle"],
        "required_devices": ["CAMCANVAS"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "take_photo",
      "description": "Takes a photo and saves it to SD card.",
      "parameters": {
        "type": "object",
        "properties": {
           "led_effect": {
            "type": "string",
            "description": "Optional. Visual LED effect on CamCanvas.",
            "enum": ["none", "pulse", "blink"]
          },
          "led_r": { "type": "integer", "description": "Optional. Red value (0-255)." },
          "led_g": { "type": "integer", "description": "Optional. Green value (0-255)." },
          "led_b": { "type": "integer", "description": "Optional. Blue value (0-255)." },
          "led_speed": { "type": "integer", "description": "Optional. Speed in ms." }
        }
      },
      "required_devices": ["CAMCANVAS"]
    }
  },
  {
    "type": "function",
    "function": {
      "name": "retrieve_local_data",
      "description": "Retrieves specific data from the CMS.",
      "parameters": {
        "type": "object",
        "properties": {
          "key": {
            "type": "string",
            "description": "The key to look up.",
            "enum": ["mission_start"]
          }
        },
        "required": ["key"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "activate_inputpad",
      "description": "Activates the InputPad to wait for user input.",
      "parameters": {
        "type": "object",
        "properties": {
          "mode": {
            "type": "string",
            "enum": ["IDLE", "DICE", "YES_NO", "A_B_C"]
          },
          "max_value": { "type": "integer", "description": "For DICE mode only." },
          "led_effect": {
            "type": "string",
            "description": "Optional. Visual LED effect on CamCanvas.",
            "enum": ["none", "pulse", "blink"]
          },
          "led_r": { "type": "integer", "description": "Optional. Red value (0-255)." },
          "led_g": { "type": "integer", "description": "Optional. Green value (0-255)." },
          "led_b": { "type": "integer", "description": "Optional. Blue value (0-255)." },
          "led_speed": { "type": "integer", "description": "Optional. Speed in ms." }
        },
        "required": ["mode"],
        "required_devices": ["INPUTPAD"]
      }
    }
  }
]
